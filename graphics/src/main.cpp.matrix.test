#include <Arduino.h>
#include <string.h>
#include "ili9341.h"
#include "graphics.h"

render_t r;

void print_matrix(mat3 *m) {
  Serial.print(m->a); Serial.print(' '); Serial.print(m->b); Serial.print(' '); Serial.print(m->c); Serial.print("\n");
  Serial.print(m->d); Serial.print(' '); Serial.print(m->e); Serial.print(' '); Serial.print(m->f); Serial.print("\n");
  Serial.print(m->g); Serial.print(' '); Serial.print(m->h); Serial.print(' '); Serial.print(m->i); Serial.print("\n\n");  
}

void setup() {
  Serial.begin(9600);
  init_display();
  clear_screen(0xffff);


  vec3 origin = (vec3) { 0, 50, 1 };
  camera_t *test = new_camera((vec2){50,0}, -M_PI, (vec2){1,1});
  print_matrix(&test->v_matrix);

  transform_vec3(&test->v_matrix, &origin);

  Serial.print(origin.x); Serial.print(' '); Serial.println(origin.y);

  begin_write();
    draw_circle_old(origin.x, origin.y, 3);
    draw_circle_old(ILI_COLS >> 1, ILI_ROWS >> 1, 5);
  end_write();
}

void loop() {
  
}